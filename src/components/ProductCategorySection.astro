---
import ProductCard from './ProductCard.astro';
import type { FeaturedProduct } from '../data/home';
const { id, title, icon, products, alternate, showViewAll, totalCount } = Astro.props as {
  id: string;
  title: string;
  icon: string;
  products: FeaturedProduct[];
  alternate?: boolean;
  showViewAll?: boolean;
  totalCount?: number;
};

const productCount = totalCount ?? products.length;
---
<div class="py-12 -mx-4 px-4 sm:-mx-6 sm:px-6 lg:-mx-8 lg:px-8" style={alternate ? "background-color: var(--color-alabaster);" : "background-color: white;"}>
  <div class="flex items-center justify-between mb-8">
      <div class="flex items-center gap-4">
        <span class="text-4xl">{icon}</span>
        <h2 class="text-3xl font-heading font-bold" style="color: var(--color-forest-green);">{title}</h2>
      </div>
    {showViewAll && (
      <a
        href={`/products/${id}/1`}
        class="inline-flex items-center gap-2 px-4 py-2 bg-white rounded-lg font-medium transition-all"
        style="border: 2px solid var(--color-forest-green); color: var(--color-forest-green);"
      >
        <span>View All ({productCount})</span>
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </a>
    )}
  </div>
  <div class="grid grid-cols-1 gap-6 md:gap-8">
    {products.map(product => (
      <ProductCard {...product} category={title} />
    ))}
  </div>
</div>
